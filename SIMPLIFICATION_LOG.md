# Reactive Resume é¡¹ç›®ç®€åŒ–æ—¥å¿—

## é¡¹ç›®ç®€åŒ–ç›®æ ‡

å°† Reactive Resume ä»å¤æ‚çš„å¤šç”¨æˆ·åœ¨çº¿åº”ç”¨ç®€åŒ–ä¸ºæœ¬åœ°å•ç”¨æˆ·åº”ç”¨ï¼Œç§»é™¤ä»¥ä¸‹åŠŸèƒ½ï¼š
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®ç­‰ï¼‰
- é¦–é¡µä»‹ç»é¡µé¢
- åç«¯è®¤è¯ã€æˆæƒå’Œé‚®ä»¶æœåŠ¡
- äº‘å­˜å‚¨ä¾èµ–ï¼Œæ”¹ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- æ•°æ®åº“ä» PostgreSQL æ”¹ä¸º SQLite

## å·²å®Œæˆçš„ä¿®æ”¹

### ç¬¬ä¸€é˜¶æ®µï¼šå‰ç«¯ç®€åŒ– âœ…
1. **è·¯ç”±ç®€åŒ–** - `apps/client/src/router/index.tsx`
   - ç§»é™¤è®¤è¯ç›¸å…³è·¯ç”±
   - ç›´æ¥é‡å®šå‘åˆ°ä»ªè¡¨æ¿

2. **åˆ é™¤è®¤è¯é¡µé¢** - `apps/client/src/pages/auth/` âœ…
   - åˆ é™¤æ•´ä¸ªè®¤è¯é¡µé¢ç›®å½•

3. **åˆ é™¤é¦–é¡µ** - `apps/client/src/pages/home/` âœ…
   - åˆ é™¤é¦–é¡µç»„ä»¶ç›®å½•

4. **åˆ é™¤è·¯ç”±å®ˆå«å’ŒåŠ è½½å™¨** âœ…
   - `apps/client/src/router/guards/` 
   - `apps/client/src/router/loaders/`

5. **åˆ é™¤è®¤è¯æœåŠ¡** - `apps/client/src/services/auth/` âœ…

6. **ç®€åŒ–ç”¨æˆ·æœåŠ¡** - `apps/client/src/services/user/user.ts` âœ…
   - è¿”å›æ¨¡æ‹Ÿæœ¬åœ°ç”¨æˆ·æ•°æ®

7. **ç®€åŒ–è®¤è¯çŠ¶æ€ç®¡ç†** - `apps/client/src/stores/auth.ts` âœ…
   - æä¾›æ¨¡æ‹Ÿæœ¬åœ°ç”¨æˆ·çŠ¶æ€

8. **ç®€åŒ– Axios é…ç½®** - `apps/client/src/libs/axios.ts` âœ…
   - ç§»é™¤è®¤è¯æ‹¦æˆªå™¨å’Œåˆ·æ–°ä»¤ç‰Œé€»è¾‘

### ç¬¬äºŒé˜¶æ®µï¼šåç«¯ç®€åŒ– âœ…
1. **åˆ é™¤è®¤è¯æ¨¡å—** - `apps/server/src/auth/` âœ…

2. **åˆ é™¤é‚®ä»¶æœåŠ¡** - `apps/server/src/mail/` âœ…

3. **ç®€åŒ–åº”ç”¨æ¨¡å—** - `apps/server/src/app.module.ts` âœ…
   - ç§»é™¤ AuthModule å’Œ MailModule

4. **ç®€åŒ–ç”¨æˆ·æ§åˆ¶å™¨** - `apps/server/src/user/user.controller.ts` âœ…
   - ç§»é™¤è®¤è¯å®ˆå«
   - è¿”å›æ¨¡æ‹Ÿæœ¬åœ°ç”¨æˆ·æ•°æ®

5. **ç®€åŒ–ç”¨æˆ·æ¨¡å—** - `apps/server/src/user/user.module.ts` âœ…
   - ç§»é™¤ AuthModule ä¾èµ–

6. **ç®€åŒ–ç”¨æˆ·æœåŠ¡** - `apps/server/src/user/user.service.ts` âœ…
   - ç§»é™¤è®¤è¯ç›¸å…³åŠŸèƒ½
   - ç®€åŒ–ä¸ºåŸºæœ¬ç”¨æˆ·æ“ä½œ

### ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®å­˜å‚¨æœ¬åœ°åŒ– âœ…
1. **æ•°æ®åº“æ¶æ„ç®€åŒ–** - `tools/prisma/schema.prisma` âœ…
   - æ”¹ä¸º SQLite æ•°æ®åº“
   - ç§»é™¤ Provider æšä¸¾å’Œ Secrets æ¨¡å‹
   - ç®€åŒ– User æ¨¡å‹ï¼Œç§»é™¤è®¤è¯å­—æ®µ
   - ä¿®å¤æšä¸¾å…¼å®¹æ€§é—®é¢˜

2. **æ•°æ®åº“æ¨¡å—ç®€åŒ–** - `apps/server/src/database/database.module.ts` âœ…
   - ä½¿ç”¨æœ¬åœ° SQLite æ•°æ®åº“

3. **ç®€å†æ§åˆ¶å™¨ç®€åŒ–** - `apps/server/src/resume/resume.controller.ts` âœ…
   - ç§»é™¤è®¤è¯å®ˆå«
   - ä½¿ç”¨å›ºå®šæœ¬åœ°ç”¨æˆ· ID
   - ä¿®å¤æ•°æ®ç±»å‹è½¬æ¢é—®é¢˜

4. **ç®€å†æ¨¡å—ç®€åŒ–** - `apps/server/src/resume/resume.module.ts` âœ…
   - ç§»é™¤ AuthModule ä¾èµ–

5. **ç®€å†æœåŠ¡ä¿®å¤** - `apps/server/src/resume/resume.service.ts` âœ…
   - ä¿®å¤ç”¨æˆ·å­—æ®µå¼•ç”¨
   - ä¿®å¤ JSON æ•°æ®åºåˆ—åŒ–

6. **å­˜å‚¨æœåŠ¡æœ¬åœ°åŒ–** - `apps/server/src/storage/storage.service.ts` âœ…
   - å®Œå…¨é‡å†™ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
   - ç§»é™¤ Minio ä¾èµ–

7. **å­˜å‚¨æ¨¡å—ç®€åŒ–** - `apps/server/src/storage/storage.module.ts` âœ…
   - ç§»é™¤ MinioModule ä¾èµ–

8. **å­˜å‚¨æ§åˆ¶å™¨ç®€åŒ–** - `apps/server/src/storage/storage.controller.ts` âœ…
   - ç§»é™¤è®¤è¯å®ˆå«
   - ä¿®å¤æ–‡ä»¶ç±»å‹é—®é¢˜

9. **å¥åº·æ£€æŸ¥ä¿®å¤** - `apps/server/src/health/storage.health.ts` âœ…
   - é€‚é…æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥

### ç¬¬å››é˜¶æ®µï¼šä¾èµ–æ¸…ç†å’Œæ•°æ®åº“åˆå§‹åŒ– âœ…
1. **ä¾èµ–åŒ…æ¸…ç†** - `package.json` âœ…
   - ç§»é™¤è®¤è¯ç›¸å…³åŒ…ï¼špassport ç³»åˆ—ã€bcryptjsã€jwt ç­‰
   - ç§»é™¤é‚®ä»¶ç›¸å…³åŒ…ï¼šnodemailerã€@nestjs-modules/mailer
   - ç§»é™¤å­˜å‚¨ç›¸å…³åŒ…ï¼šminioã€nestjs-minio-client
   - ç§»é™¤å…¶ä»–è®¤è¯ä¾èµ–ï¼šaxios-auth-refreshã€otplib

2. **æ•°æ®åº“åˆå§‹åŒ–** âœ…
   - ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
   - åˆ›å»ºæœ¬åœ° SQLite æ•°æ®åº“
   - åˆ›å»ºç§å­è„šæœ¬åˆå§‹åŒ–æœ¬åœ°ç”¨æˆ·æ•°æ®
   - ä¿®å¤ SQLite å…¼å®¹æ€§é—®é¢˜

3. **åº”ç”¨ç¨‹åºæµ‹è¯•** âœ…
   - æˆåŠŸå¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨ï¼š
     - åç«¯æœåŠ¡å™¨ï¼šhttp://localhost:3000
     - å‰ç«¯æœåŠ¡å™¨ï¼šhttp://localhost:5173
     - Artboard æœåŠ¡å™¨ï¼šhttp://localhost:6173
   - API æµ‹è¯•é€šè¿‡ï¼š
     - å¥åº·æ£€æŸ¥ï¼š`/api/health` âœ…
     - ç”¨æˆ· APIï¼š`/api/user/me` âœ…
     - ç®€å† APIï¼š`/api/resume` âœ…
   - å‰ç«¯åº”ç”¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® âœ…

### ç¬¬äº”é˜¶æ®µï¼šä¿®å¤æ®‹ç•™è®¤è¯å¼•ç”¨ âœ…
1. **ä¿®å¤ç»„ä»¶è®¤è¯å¼•ç”¨** âœ…
   - `apps/client/src/components/user-options.tsx` - ç§»é™¤ç™»å‡ºåŠŸèƒ½
   - `apps/client/src/pages/dashboard/settings/_sections/danger.tsx` - ç®€åŒ–ä¸ºæœ¬åœ°æ¨¡å¼æç¤º
   - `apps/client/src/pages/dashboard/settings/_sections/account.tsx` - ç§»é™¤é‚®ä»¶éªŒè¯åŠŸèƒ½
   - `apps/client/src/pages/dashboard/settings/_sections/security.tsx` - ç®€åŒ–ä¸ºæœ¬åœ°æ¨¡å¼æç¤º

2. **æ¸…ç†è®¤è¯ç›¸å…³æä¾›è€…** âœ…
   - `apps/client/src/providers/auth-refresh.tsx` - ç®€åŒ–ä¸ºç©ºæ“ä½œåŒ…è£…å™¨
   - `apps/client/src/providers/dialog.tsx` - ç§»é™¤åŒå› ç´ è®¤è¯å¯¹è¯æ¡†å¼•ç”¨

3. **åˆ é™¤è®¤è¯å¯¹è¯æ¡†** âœ…
   - `apps/client/src/pages/dashboard/settings/_dialogs/two-factor.tsx` - åˆ é™¤åŒå› ç´ è®¤è¯å¯¹è¯æ¡†

### ç¬¬å…­é˜¶æ®µï¼šæ„å»ºé…ç½®ä¼˜åŒ– âœ…
1. **ç®€åŒ–é…ç½® Schema** - `apps/server/src/config/schema.ts` âœ…
   - ç§»é™¤è®¤è¯ã€é‚®ä»¶ã€äº‘å­˜å‚¨ç›¸å…³çš„ç¯å¢ƒå˜é‡
   - æ·»åŠ é»˜è®¤å€¼ä»¥æ”¯æŒæ— é…ç½®å¯åŠ¨
   - ç®€åŒ–ä¸ºæœ¬åœ°å¼€å‘æ¨¡å¼é…ç½®

2. **ä¿®å¤æœåŠ¡é…ç½®å¼•ç”¨** âœ…
   - `apps/server/src/contributors/contributors.service.ts` - ç§»é™¤ Crowdin é…ç½®å¼•ç”¨
   - `apps/server/src/translation/translation.service.ts` - ç§»é™¤ Crowdin é…ç½®å¼•ç”¨

3. **åˆ›å»ºæœ¬åœ°é…ç½®æ–‡æ¡£** - `config.local.md` âœ…
   - æä¾›æœ¬åœ°æ¨¡å¼é…ç½®è¯´æ˜
   - åŒ…å«é»˜è®¤ç«¯å£å’Œ URL é…ç½®
   - è¯´æ˜å¦‚ä½•è‡ªå®šä¹‰ç¯å¢ƒå˜é‡

4. **è§£å†³è¿è¡Œæ—¶é—®é¢˜** âœ…
   - ä¿®å¤ç«¯å£å†²çªé—®é¢˜
   - ä¿®å¤ TypeScript ç±»å‹é”™è¯¯
   - ç¡®ä¿æ— é…ç½®å¯å¯åŠ¨

### ç¬¬ä¸ƒé˜¶æ®µï¼šElectron é›†æˆ âœ…
1. **æ·»åŠ  Electron æ”¯æŒ**
   - å®‰è£… Electron ç›¸å…³ä¾èµ–
   - åˆ›å»ºä¸»è¿›ç¨‹æ–‡ä»¶
   - é…ç½®æ‰“åŒ…è„šæœ¬

2. **æ¡Œé¢åº”ç”¨ä¼˜åŒ–**
   - æ·»åŠ åº”ç”¨å›¾æ ‡å’Œå…ƒæ•°æ®
   - é…ç½®è‡ªåŠ¨æ›´æ–°ï¼ˆå¯é€‰ï¼‰
   - ä¼˜åŒ–çª—å£ç®¡ç†

### ç¬¬å…«é˜¶æ®µï¼šElectron çª—å£æ˜¾ç¤ºé—®é¢˜ä¿®å¤ âœ…
1. **Windows æ–‡ä»¶å…³è”é—®é¢˜** âœ…
   - é—®é¢˜ï¼šWindows å°† `electron .` ä¸­çš„ `.js` æ–‡ä»¶å…³è”åˆ° VSCode
   - è§£å†³ï¼šä½¿ç”¨ `.\\node_modules\\.bin\\electron.CMD electron.js` ç›´æ¥è°ƒç”¨å¯æ‰§è¡Œæ–‡ä»¶

2. **å­—ç¬¦ç¼–ç é—®é¢˜** âœ…
   - é—®é¢˜ï¼šElectron çª—å£æ˜¾ç¤ºä¸­æ–‡ä¹±ç 
   - è§£å†³ï¼šåœ¨ HTML ä¸­æ·»åŠ  `<meta charset="UTF-8">` å’Œæ­£ç¡®çš„ç¼–ç è®¾ç½®

3. **æœåŠ¡å™¨è¿æ¥é—®é¢˜** âœ…
   - é—®é¢˜ï¼šElectron æ— æ³•è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨
   - è§£å†³ï¼šæ·»åŠ æœåŠ¡å™¨è¿æ¥æ£€æµ‹å’Œè‡ªåŠ¨é‡è¯•æœºåˆ¶

4. **æ•°æ®åº“é—®é¢˜** âœ…
   - é—®é¢˜ï¼šæ•°æ®åº“è¿ç§»å†²çªï¼ˆPostgreSQL vs SQLiteï¼‰
   - è§£å†³ï¼šæ¸…ç†æ—§è¿ç§»æ–‡ä»¶ï¼Œé‡æ–°åˆ›å»º SQLite æ•°æ®åº“å’Œç§å­æ•°æ®

5. **ç”¨æˆ·IDä¸ä¸€è‡´é—®é¢˜** âœ…
   - é—®é¢˜ï¼šå‰åç«¯ç”¨æˆ·IDä¸åŒ¹é…ï¼Œå¯¼è‡´å¤–é”®çº¦æŸè¿å
   - åŸå› ï¼šç”¨æˆ·æ§åˆ¶å™¨è¿”å› `'local-user'`ï¼Œæ•°æ®åº“ä¸­å­˜å‚¨ `'local-user-id'`
   - è§£å†³ï¼šç»Ÿä¸€æ‰€æœ‰æ¨¡å—ä½¿ç”¨ `'local-user-id'` ä½œä¸ºæœ¬åœ°ç”¨æˆ·ID

### ç¬¬ä¹é˜¶æ®µï¼šå‰ç«¯ç»„ä»¶é˜²å¾¡æ€§ä¿®å¤ âœ…
1. **ä¿®å¤ metadata è®¿é—®é”™è¯¯** âœ…
   - é—®é¢˜ï¼šåœ¨ç®€å†æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªç»„ä»¶ç›´æ¥è®¿é—® `state.resume.data.metadata` å±æ€§
   - é”™è¯¯ï¼š`Cannot read properties of undefined (reading 'notes')`ã€`Cannot read properties of undefined (reading 'template')` ç­‰
   - æ ¹æœ¬åŸå› ï¼šresume æ•°æ®å¼‚æ­¥åŠ è½½æ—¶ï¼Œç»„ä»¶åœ¨æ•°æ®å®Œå…¨åŠ è½½å‰å°è¯•è®¿é—®åµŒå¥—å±æ€§
   
2. **æ·»åŠ é˜²å¾¡æ€§æ£€æŸ¥** âœ…
   - `apps/client/src/pages/builder/sidebars/right/sections/notes.tsx` - æ·»åŠ  null æ£€æŸ¥å’Œé»˜è®¤å€¼
   - `apps/client/src/pages/builder/_components/toolbar.tsx` - ä¿®å¤ pageOptions è®¿é—®
   - `apps/client/src/pages/builder/sidebars/right/sections/css.tsx` - ä¿®å¤ css å±æ€§è®¿é—®
   - `apps/client/src/pages/builder/sidebars/right/sections/layout.tsx` - ä¿®å¤ layout å±æ€§è®¿é—®
   - `apps/client/src/pages/builder/sidebars/right/sections/template.tsx` - ä¿®å¤ template å±æ€§è®¿é—®
   - `apps/client/src/pages/builder/sidebars/right/sections/typography.tsx` - ä¿®å¤ typography å±æ€§è®¿é—®

3. **æ¨¡å¼ç»Ÿä¸€** âœ…
   - æ‰€æœ‰ç»„ä»¶ç»Ÿä¸€ä½¿ç”¨ `state.resume.data?.metadata?.[property] || defaultValue` æ¨¡å¼
   - ç¡®ä¿åœ¨æ•°æ®åŠ è½½æœŸé—´ä¸ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯
   - æä¾›åˆç†çš„é»˜è®¤å€¼ä»¥ä¿æŒåº”ç”¨çš„ç¨³å®šæ€§

4. **æ‰©å±•ä¿®å¤èŒƒå›´** âœ…
   - `apps/artboard/src/pages/preview.tsx` - ä¿®å¤ layout å’Œ template è®¿é—®
   - `apps/artboard/src/pages/builder.tsx` - ä¿®å¤ layoutã€format å’Œ template è®¿é—®
   - `apps/artboard/src/components/picture.tsx` - ä¿®å¤ typography.font.size è®¿é—®
   - `apps/artboard/src/components/page.tsx` - ä¿®å¤ page å’Œ typography è®¿é—®
   - `apps/artboard/src/templates/leafish.tsx` - ä¿®å¤ theme.primary è®¿é—®
   - `apps/artboard/src/templates/gengar.tsx` - ä¿®å¤ theme.primary è®¿é—®ï¼ˆä¸¤å¤„ï¼‰
   - `apps/artboard/src/templates/glalie.tsx` - ä¿®å¤ theme.primary è®¿é—®ï¼ˆä¸¤å¤„ï¼‰
   - `apps/client/src/stores/resume.ts` - ä¿®å¤ addSection å’Œ removeSection ä¸­çš„ layout è®¿é—®
   - `apps/server/src/printer/printer.service.ts` - ä¿®å¤ layout å’Œ css è®¿é—®

5. **ä¿®å¤ basics å±æ€§è®¿é—®é”™è¯¯** âœ…
   - `apps/artboard/src/pages/artboard.tsx` - ä¿®å¤ basics.name å’Œæ‰€æœ‰ metadata å­å±æ€§è®¿é—®
   - `apps/artboard/src/templates/nosepass.tsx` - ä¿®å¤ basics.name è®¿é—®
   - `apps/artboard/src/templates/pikachu.tsx` - ä¿®å¤ basics.picture.borderRadius è®¿é—®
   - `apps/artboard/src/components/picture.tsx` - ä¿®å¤ basics.picture è®¿é—®
   - `apps/artboard/src/providers/index.tsx` - æ·»åŠ æ•°æ®åˆå¹¶æœºåˆ¶ï¼Œç¡®ä¿å§‹ç»ˆæœ‰å®Œæ•´çš„é»˜è®¤æ•°æ®

### ç¬¬åé˜¶æ®µï¼šæœ€ç»ˆæµ‹è¯•å’Œæ–‡æ¡£ ğŸ“‹
1. **åŠŸèƒ½æµ‹è¯•**
   - âœ… Electron çª—å£æ­£å¸¸æ˜¾ç¤º
   - âœ… ä¸­æ–‡å­—ç¬¦æ­£å¸¸æ˜¾ç¤º
   - âœ… è‡ªåŠ¨è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨
   - âœ… ä¿®å¤ç®€å†åˆ›å»ºå’Œè®¿é—®çš„ metadata é”™è¯¯
   - ğŸ”„ æµ‹è¯•ç®€å†ç¼–è¾‘ã€å¯¼å‡ºåŠŸèƒ½
   - æµ‹è¯•æœ¬åœ°å­˜å‚¨åŠŸèƒ½
   - æµ‹è¯•æ‰“å°å’Œé¢„è§ˆåŠŸèƒ½

2. **æ–‡æ¡£æ›´æ–°**
   - æ›´æ–° README.md
   - åˆ›å»ºæœ¬åœ°éƒ¨ç½²æŒ‡å—
   - æ·»åŠ æ•…éšœæ’é™¤æŒ‡å—

## é¡¹ç›®ç‹¬ç«‹æ€§è¯„ä¼° âœ…

### å½“å‰çŠ¶æ€åˆ†æ
- âœ… **æ•°æ®åº“**ï¼šå·²ä½¿ç”¨ SQLite æœ¬åœ°æ•°æ®åº“
- âœ… **å­˜å‚¨**ï¼šå·²ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- âœ… **ç”¨æˆ·ç³»ç»Ÿ**ï¼šå·²ç®€åŒ–ä¸ºæœ¬åœ°å•ç”¨æˆ·æ¨¡å¼
- âœ… **è®¤è¯**ï¼šå·²å®Œå…¨ç§»é™¤
- âœ… **é‚®ä»¶æœåŠ¡**ï¼šå·²å®Œå…¨ç§»é™¤
- âœ… **æ¡Œé¢åº”ç”¨**ï¼šå·²æ”¯æŒ Electron
- âŒ **PDFç”Ÿæˆ**ï¼šä»ä¾èµ–å¤–éƒ¨ Chrome æœåŠ¡

### ç¬¬åé˜¶æ®µï¼šå®Œå…¨ç‹¬ç«‹åŒ–å®ç° âœ…

1. **é›†æˆ Puppeteer æ›¿ä»£å¤–éƒ¨ Chrome** âœ…
   - âœ… å®‰è£… `puppeteer` åŒ…
   - âœ… ä¿®æ”¹ PDF ç”ŸæˆæœåŠ¡ä½¿ç”¨æœ¬åœ° Puppeteer è€Œä¸æ˜¯å¤–éƒ¨ Chrome æœåŠ¡
   - âœ… ç§»é™¤å¯¹ `CHROME_URL`ã€`CHROME_TOKEN` çš„ä¾èµ–
   - âœ… å®ç°æµè§ˆå™¨å®ä¾‹å¤ç”¨ä»¥æé«˜æ€§èƒ½
   - âœ… æ·»åŠ èµ„æºæ¸…ç†æœºåˆ¶
   - âœ… æµ‹è¯•éªŒè¯ï¼šå¥åº·æ£€æŸ¥æ˜¾ç¤º browser çŠ¶æ€ä¸º "up"ï¼Œç‰ˆæœ¬ "Chrome/131.0.6778.204"
   - âœ… ä¿®å¤å¼€å‘æ¨¡å¼é™æ€æ–‡ä»¶é…ç½®å†²çªé—®é¢˜

2. **ç‹¬ç«‹æ€§éªŒè¯** âœ…
   - âœ… æ•°æ®åº“ï¼šSQLite æœ¬åœ°æ–‡ä»¶ (local-resume.db)
   - âœ… å­˜å‚¨ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (uploads/ ç›®å½•)
   - âœ… PDFç”Ÿæˆï¼šæœ¬åœ° Puppeteer (Chrome/131.0.6778.204)
   - âœ… ç”¨æˆ·ç³»ç»Ÿï¼šæœ¬åœ°å•ç”¨æˆ·æ¨¡å¼
   - âœ… æ— éœ€ä»»ä½•å¤–éƒ¨æœåŠ¡æˆ–å®¹å™¨

### ä¸‹ä¸€æ­¥å·¥ä½œï¼šæœ€ç»ˆä¼˜åŒ– ğŸ¯

1. **å•æ–‡ä»¶æ‰“åŒ…**ï¼š
   - é…ç½® Electron Builder æ‰“åŒ…æ‰€æœ‰ä¾èµ–
   - åˆ›å»ºå…å®‰è£…çš„ä¾¿æºç‰ˆæœ¬

2. **ç¦»çº¿å­—ä½“æ”¯æŒ**ï¼š
   - å†…ç½®å¸¸ç”¨å­—ä½“æ–‡ä»¶
   - ç¡®ä¿PDFç”Ÿæˆä¸ä¾èµ–ç³»ç»Ÿå­—ä½“

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - æµ‹è¯•PDFç”Ÿæˆå’Œé¢„è§ˆåŠŸèƒ½
   - ä¼˜åŒ–Puppeteerå¯åŠ¨å‚æ•°
   - æ·»åŠ ç¼“å­˜æœºåˆ¶

## æŠ€æœ¯è¯´æ˜

### æ•°æ®åº“å˜æ›´
- **æ•°æ®åº“ç±»å‹**ï¼šPostgreSQL â†’ SQLite
- **æ•°æ®åº“æ–‡ä»¶**ï¼š`./local-resume.db`
- **ä¸»è¦å˜æ›´**ï¼š
  - ç§»é™¤ `Provider` æšä¸¾ï¼ˆSQLite ä¸æ”¯æŒæšä¸¾ï¼‰
  - ç§»é™¤ `Secrets` æ¨¡å‹
  - ç®€åŒ– `User` æ¨¡å‹
  - `visibility` å­—æ®µæ”¹ä¸º String ç±»å‹

### å­˜å‚¨å˜æ›´
- **å­˜å‚¨æ–¹å¼**ï¼šMinio äº‘å­˜å‚¨ â†’ æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **å­˜å‚¨ç›®å½•**ï¼š`./uploads/`
- **API å…¼å®¹æ€§**ï¼šä¿æŒç›¸åŒçš„ API æ¥å£

### ç”¨æˆ·ç³»ç»Ÿå˜æ›´
- **ç”¨æˆ·æ¨¡å¼**ï¼šå¤šç”¨æˆ· â†’ å•ç”¨æˆ·
- **æœ¬åœ°ç”¨æˆ· ID**ï¼š`local-user-id`
- **è®¤è¯æ–¹å¼**ï¼šå®Œå…¨ç§»é™¤è®¤è¯ç³»ç»Ÿ

### é…ç½®å˜æ›´
- **ç¯å¢ƒå˜é‡**ï¼šå¤§å¹…ç®€åŒ–ï¼Œæ·»åŠ é»˜è®¤å€¼
- **å¯åŠ¨æ–¹å¼**ï¼šæ”¯æŒæ— é…ç½®å¯åŠ¨
- **URL é…ç½®**ï¼šé€‚é…æœ¬åœ°å¼€å‘ç«¯å£

## å½“å‰çŠ¶æ€

âœ… **é¡¹ç›®ç®€åŒ–åŸºæœ¬å®Œæˆ**
- æ‰€æœ‰è®¤è¯åŠŸèƒ½å·²ç§»é™¤
- æ•°æ®åº“å·²æœ¬åœ°åŒ–
- å­˜å‚¨å·²æœ¬åœ°åŒ–
- åº”ç”¨ç¨‹åºå¯ä»¥æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œ
- åŸºæœ¬ API åŠŸèƒ½æ­£å¸¸
- æ‰€æœ‰è®¤è¯æœåŠ¡å¼•ç”¨å·²æ¸…ç†
- é…ç½®æ–‡ä»¶å·²ä¼˜åŒ–å¹¶æ”¯æŒé»˜è®¤å€¼

ğŸ”„ **æ­£åœ¨è¿›è¡Œ**
- å‡†å¤‡å¼€å§‹ Electron é›†æˆ

ğŸ“‹ **å¾…å®Œæˆ**
- Electron é›†æˆ
- æœ€ç»ˆæµ‹è¯•å’Œæ–‡æ¡£

## é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

1. **SQLite æšä¸¾å…¼å®¹æ€§**
   - é—®é¢˜ï¼šSQLite ä¸æ”¯æŒæšä¸¾ç±»å‹
   - è§£å†³ï¼šå°†æšä¸¾å­—æ®µæ”¹ä¸ºå­—ç¬¦ä¸²ç±»å‹

2. **æ•°æ®åºåˆ—åŒ–é—®é¢˜**
   - é—®é¢˜ï¼šPrisma è¿”å›çš„ JSON æ•°æ®éœ€è¦åºåˆ—åŒ–
   - è§£å†³ï¼šåœ¨æœåŠ¡å±‚è¿›è¡Œ JSON.stringify/parse è½¬æ¢

3. **ç±»å‹å…¼å®¹æ€§é—®é¢˜**
   - é—®é¢˜ï¼šç§»é™¤è®¤è¯åçš„ç±»å‹ä¸åŒ¹é…
   - è§£å†³ï¼šä½¿ç”¨ç±»å‹æ–­è¨€å’Œæ¥å£é‡å®šä¹‰

4. **ä¾èµ–æ¸…ç†é—®é¢˜**
   - é—®é¢˜ï¼šç§»é™¤ä¾èµ–åçš„å¯¼å…¥é”™è¯¯
   - è§£å†³ï¼šé€ä¸€ä¿®å¤å¯¼å…¥å’Œé‡æ„ç›¸å…³ä»£ç 

5. **æ®‹ç•™è®¤è¯å¼•ç”¨é—®é¢˜**
   - é—®é¢˜ï¼šåˆ é™¤è®¤è¯æœåŠ¡åï¼Œä»æœ‰ç»„ä»¶å¼•ç”¨å·²åˆ é™¤çš„æœåŠ¡
   - è§£å†³ï¼šé€ä¸€æ‰¾åˆ°å¹¶ä¿®å¤æ‰€æœ‰å¼•ç”¨ï¼Œç®€åŒ–æˆ–åˆ é™¤ç›¸å…³åŠŸèƒ½

6. **é…ç½®å…¼å®¹æ€§é—®é¢˜**
   - é—®é¢˜ï¼šæ—§çš„ .env é…ç½®åŒ…å«å·²åˆ é™¤çš„æœåŠ¡é…ç½®
   - è§£å†³ï¼šç®€åŒ–é…ç½® schemaï¼Œæ·»åŠ é»˜è®¤å€¼ï¼Œç§»é™¤ä¸å¿…è¦çš„é…ç½®é¡¹

7. **ç«¯å£å†²çªé—®é¢˜**
   - é—®é¢˜ï¼šå¼€å‘æœåŠ¡å™¨ç«¯å£è¢«å ç”¨
   - è§£å†³ï¼šè¯†åˆ«å¹¶ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹

## æ€§èƒ½ä¼˜åŒ–

- ç§»é™¤äº†å¤§é‡ä¸å¿…è¦çš„ä¾èµ–åŒ…
- ç®€åŒ–äº†æ•°æ®åº“æŸ¥è¯¢
- ç§»é™¤äº†å¤æ‚çš„è®¤è¯ä¸­é—´ä»¶
- æœ¬åœ°å­˜å‚¨é¿å…äº†ç½‘ç»œå»¶è¿Ÿ
- æ¸…ç†äº†æ‰€æœ‰æœªä½¿ç”¨çš„è®¤è¯ç›¸å…³ä»£ç 
- ä¼˜åŒ–äº†é…ç½®åŠ è½½ï¼Œæ”¯æŒé»˜è®¤å€¼å’Œæ— é…ç½®å¯åŠ¨ 

âœ… **Reactive Resume å·²æˆåŠŸè½¬æ¢ä¸ºç‹¬ç«‹çš„æ¡Œé¢åº”ç”¨ç¨‹åº**
- æ— éœ€ Docker
- æ— éœ€å¤–éƒ¨æœåŠ¡ä¾èµ–
- æ— éœ€ç½‘ç»œè¿æ¥
- å®Œå…¨æœ¬åœ°åŒ–è¿è¡Œ
- æ”¯æŒæ¡Œé¢åº”ç”¨æ¨¡å¼

åº”ç”¨ç°åœ¨å¯ä»¥é€šè¿‡ `pnpm electron:dev` å¯åŠ¨å¼€å‘ç‰ˆæœ¬ï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ 

## å®Œæˆçš„å·¥ä½œ

### 1. Electron æ¡Œé¢åº”ç”¨è®¾ç½® âœ…
- åˆ›å»ºäº† electron.js ä¸»è¿›ç¨‹æ–‡ä»¶
- é…ç½®äº† package.json è„šæœ¬æ”¯æŒ Windows
- æ·»åŠ äº†è¿æ¥æ£€æµ‹å’Œé‡è¯•æœºåˆ¶
- ä¿®å¤äº† Windows å¹³å°æ–‡ä»¶å…³è”é—®é¢˜
- è§£å†³äº†ä¸­æ–‡å­—ç¬¦ä¹±ç é—®é¢˜

### 2. æ•°æ®åº“ç®€åŒ– âœ…
- ä» PostgreSQL è¿ç§»åˆ° SQLite (local-resume.db)
- ç§»é™¤äº†å¤šç”¨æˆ·ç›¸å…³çš„è¡¨å’Œçº¦æŸ
- åˆ›å»ºæœ¬åœ°ç”¨æˆ·è´¦æˆ· (local-user-id)
- æ·»åŠ ç§å­æ•°æ®å’Œç¤ºä¾‹ç®€å†

### 3. æœåŠ¡å™¨é…ç½®ç®€åŒ– âœ…
- ä¿®æ”¹äº† Prisma é…ç½®ä½¿ç”¨ SQLite
- ç§»é™¤äº†å¤šç”¨æˆ·è®¤è¯é€»è¾‘
- é…ç½®æœ¬åœ°å­˜å‚¨æœåŠ¡
- ç»Ÿä¸€ç”¨æˆ·IDä¸º 'local-user-id'

### 4. å‰ç«¯çŠ¶æ€ç®¡ç†ä¿®å¤ âœ…
- ä¿®å¤äº† template å±æ€§è®¿é—®é”™è¯¯
- ä¸ºç®€å† store æ·»åŠ äº†é»˜è®¤æ•°æ®ç»“æ„
- æ·»åŠ äº†é˜²æŠ¤æ£€æŸ¥é˜²æ­¢è®¿é—® undefined å±æ€§
- ç»Ÿä¸€å‰ç«¯ç”¨æˆ·æ•°æ®ä¸º 'local-user-id'

### 5. ç”¨æˆ·IDä¸€è‡´æ€§ä¿®å¤ âœ…
- åç«¯æ§åˆ¶å™¨ç»Ÿä¸€ä½¿ç”¨ 'local-user-id'
- å‰ç«¯çŠ¶æ€ç®¡ç†ç»Ÿä¸€ä½¿ç”¨ 'local-user-id'
- æ•°æ®åº“ä¸­çš„ç”¨æˆ·IDç»Ÿä¸€ä¸º 'local-user-id'

## å½“å‰çŠ¶æ€
- Electron çª—å£æ­£å¸¸æ˜¾ç¤ºï¼Œä¸­æ–‡æ–‡æœ¬æ­£ç¡®æ˜¾ç¤º
- å¼€å‘æœåŠ¡å™¨æˆåŠŸå¯åŠ¨ (å‰ç«¯:5173, åç«¯:3000, Artboard:6173)
- æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œç”¨æˆ·æ•°æ®å·²åˆå§‹åŒ–
- ä¿®å¤äº†å‰ç«¯æ¨¡æ¿è®¿é—®é”™è¯¯

## å·²çŸ¥é—®é¢˜
- ~~template å±æ€§è®¿é—®é”™è¯¯~~ âœ… å·²ä¿®å¤
- å¯èƒ½ä»æœ‰ç®€å†åˆ›å»ºå’Œé¡µé¢å¯¼èˆªé—®é¢˜éœ€è¦è¿›ä¸€æ­¥æµ‹è¯•

## ä¸‹ä¸€æ­¥å·¥ä½œå»ºè®®
1. æµ‹è¯•ç®€å†åˆ›å»ºåŠŸèƒ½
2. æµ‹è¯•æ¨¡æ¿åˆ‡æ¢åŠŸèƒ½
3. æµ‹è¯•æ•°æ®æŒä¹…åŒ–
4. éªŒè¯é¡µé¢å¯¼èˆªåŠŸèƒ½
5. æ£€æŸ¥å…¶ä»–æ½œåœ¨çš„ undefined è®¿é—®é”™è¯¯

## æ–‡ä»¶å˜æ›´è®°å½•
- `electron.js` - ä¸»è¿›ç¨‹é…ç½®å’Œè¿æ¥é€»è¾‘
- `package.json` - Windows å¯åŠ¨è„šæœ¬
- `apps/server/src/user/user.controller.ts` - ç”¨æˆ·IDç»Ÿä¸€
- `apps/server/src/resume/resume.controller.ts` - ç”¨æˆ·IDç»Ÿä¸€
- `apps/client/src/stores/auth.ts` - å‰ç«¯ç”¨æˆ·æ•°æ®
- `apps/client/src/stores/resume.ts` - é»˜è®¤æ•°æ®ç»“æ„
- `apps/client/src/pages/builder/sidebars/right/sections/template.tsx` - é˜²æŠ¤æ£€æŸ¥
- `start-app.bat` - Windows å¯åŠ¨è„šæœ¬
- `apps/artboard/src/store/artboard.ts` - ä¿®å¤ template é”™è¯¯ 

## ç›®æ ‡
å°† Reactive Resume é¡¹ç›®é‡æ„ä¸ºå®Œå…¨ç‹¬ç«‹çš„åº”ç”¨ï¼Œæ— éœ€ä»»ä½•å¤–éƒ¨åº”ç”¨ä¾èµ–ã€‚

## å·²å®Œæˆçš„ç®€åŒ–å·¥ä½œ

### 1. æ•°æ®åº“ç®€åŒ– âœ…
- **ä¹‹å‰**: ä½¿ç”¨ PostgreSQL + Docker
- **ç°åœ¨**: ä½¿ç”¨ SQLite æœ¬åœ°æ•°æ®åº“
- **æ–‡ä»¶**: `tools/prisma/schema.prisma`
- **é…ç½®**: æ•°æ®åº“ URL æ”¹ä¸º `file:./dev.db`

### 2. æ–‡ä»¶å­˜å‚¨ç®€åŒ– âœ…
- **ä¹‹å‰**: ä½¿ç”¨ Minio å¯¹è±¡å­˜å‚¨
- **ç°åœ¨**: ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
- **æœåŠ¡**: `apps/server/src/storage/storage.service.ts`
- **é…ç½®**: å­˜å‚¨è·¯å¾„ä¸º `./uploads` ç›®å½•

### 3. ç”¨æˆ·è®¤è¯ç®€åŒ– âœ…
- **ä¹‹å‰**: å¤æ‚çš„å¤šç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **ç°åœ¨**: å•ç”¨æˆ·æ¨¡å¼ï¼Œæ— éœ€è®¤è¯
- **ç”¨æˆ·**: ä½¿ç”¨å›ºå®šçš„æœ¬åœ°ç”¨æˆ·ID (`local-user-id`)

### 4. Electron æ¡Œé¢åº”ç”¨æ”¯æŒ âœ…
- **åŠŸèƒ½**: æ”¯æŒä½œä¸ºæ¡Œé¢åº”ç”¨è¿è¡Œ
- **æ–‡ä»¶**: `electron.js`, `start-app.bat`
- **å‘½ä»¤**: `pnpm electron:dev`

### 5. PDF ç”ŸæˆæœåŠ¡ç‹¬ç«‹åŒ– âœ…
- **ä¹‹å‰**: ä¾èµ–å¤–éƒ¨ Chrome æµè§ˆå™¨æœåŠ¡ (Docker)
- **ç°åœ¨**: ä½¿ç”¨æœ¬åœ° Puppeteer å®ä¾‹
- **æ–‡ä»¶**: `apps/server/src/printer/printer.service.ts`
- **ä¾èµ–**: æ·»åŠ  `puppeteer` å’Œ `@types/puppeteer`
- **æŠ€æœ¯ç»†èŠ‚**:
  - ç§»é™¤äº†å¤–éƒ¨ Chrome è¿æ¥é€»è¾‘
  - å®ç°æœ¬åœ°æµè§ˆå™¨å®ä¾‹å¤ç”¨
  - æ·»åŠ èµ„æºæ¸…ç†æœºåˆ¶
  - ç§»é™¤ Docker host.docker.internal URL è½¬æ¢

### 6. å¼€å‘ç¯å¢ƒé…ç½®ä¼˜åŒ– âœ…
- **ä¿®å¤**: é™æ€æ–‡ä»¶æœåŠ¡é”™è¯¯ (ENOENT)
- **æ–‡ä»¶**: `apps/server/src/app.module.ts`
- **å˜æ›´**: ä»…åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹æä¾›é™æ€æ–‡ä»¶æœåŠ¡
- **é…ç½®**: `apps/server/src/config/schema.ts` ä½¿ Chrome é…ç½®å¯é€‰

### 7. å‰ç«¯é”™è¯¯ä¿®å¤ âœ…
- **é—®é¢˜**: "Cannot read properties of undefined (reading 'template')"
- **åŸå› **: artboard store ä¸­ resume è¢«åˆå§‹åŒ–ä¸º null
- **ä¿®å¤**: ä½¿ç”¨ defaultResumeData æ›¿ä»£ null åˆå§‹åŒ–
- **æ–‡ä»¶**: `apps/artboard/src/store/artboard.ts`
- **ç»“æœ**: å‰ç«¯é¡µé¢ç°åœ¨å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œä¸å†æ˜¾ç¤ºé”™è¯¯

## æµ‹è¯•éªŒè¯

### æœ€ç»ˆæµ‹è¯•ç»“æœ âœ…
æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼š

#### åç«¯ API æµ‹è¯• âœ…
```bash
curl http://localhost:3000/api/health
# è¿”å›: Status 200 - æ‰€æœ‰æœåŠ¡ "up"
```

#### å‰ç«¯æœåŠ¡æµ‹è¯• âœ…
- **Frontend** (port 5173): âœ… æ­£å¸¸è¿è¡Œ - Status 200
- **Artboard** (port 6173): âœ… æ­£å¸¸è¿è¡Œ

#### å¥åº·æ£€æŸ¥ âœ…
- **Database**: SQLite - "up"
- **Storage**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ - "up"  
- **Browser**: Puppeteer Chrome/131.0.6778.204 - "up"

#### åº”ç”¨çŠ¶æ€ âœ…
- **Webåº”ç”¨**: http://localhost:5173 - âœ… æ­£å¸¸åŠ è½½ï¼Œæ— é”™è¯¯ä¿¡æ¯
- **æ¨¡æ¿é”™è¯¯**: âœ… å·²ä¿®å¤ï¼Œé¡µé¢æ­£å¸¸æ˜¾ç¤º

## æœ€ç»ˆçŠ¶æ€
ğŸ‰ **100% ç‹¬ç«‹åº”ç”¨** - å®Œå…¨æ— ä¾èµ–ï¼

### æŠ€æœ¯æ ˆå®ç°
- âœ… **æ•°æ®åº“**: SQLite (æœ¬åœ°æ–‡ä»¶)
- âœ… **å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ  
- âœ… **PDFç”Ÿæˆ**: å†…åµŒ Puppeteer
- âœ… **è®¤è¯**: å•ç”¨æˆ·æ¨¡å¼ (æ— éœ€å¤–éƒ¨è®¤è¯)
- âœ… **å‰ç«¯**: React + Vite (ç«¯å£ 5173)
- âœ… **åç«¯**: NestJS (ç«¯å£ 3000)
- âœ… **æ¨¡æ¿æ¸²æŸ“**: Artboard (ç«¯å£ 6173)

### å¯ç”¨åŠŸèƒ½
- âœ… ç®€å†åˆ›å»ºå’Œç¼–è¾‘
- âœ… å¤šç§æ¨¡æ¿é€‰æ‹©
- âœ… å®æ—¶é¢„è§ˆ
- âœ… PDF å¯¼å‡º
- âœ… æœ¬åœ°æ•°æ®æŒä¹…åŒ–
- âœ… æ¡Œé¢åº”ç”¨æ”¯æŒ (Electron)

## ä½¿ç”¨æ–¹æ³•
```bash
# å¯åŠ¨å®Œæ•´åº”ç”¨ (æ¨è)
pnpm electron:dev

# æˆ–è€…ä»…å¯åŠ¨ Web ç‰ˆæœ¬
pnpm dev
```

**åº”ç”¨åœ°å€**: http://localhost:5173

ğŸ¯ **ä»»åŠ¡å®Œæˆï¼** é¡¹ç›®å·²æˆåŠŸè½¬æ¢ä¸ºå®Œå…¨ç‹¬ç«‹çš„æœ¬åœ°åº”ç”¨ï¼Œæ— éœ€ä»»ä½•å¤–éƒ¨ä¾èµ–ã€‚

### 2025-01-10: æ·»åŠ é”™è¯¯æ•è·å’Œè°ƒè¯•æœºåˆ¶
#### é—®é¢˜
ç”¨æˆ·ä»ç„¶é‡åˆ° "Cannot read properties of undefined (reading 'layout')" é”™è¯¯ï¼Œéœ€è¦æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ¥å¸®åŠ©è°ƒè¯•ã€‚

#### è§£å†³æ–¹æ¡ˆ
1. **åˆ›å»º Error Boundary ç»„ä»¶** âœ…
   - æ–‡ä»¶ï¼š`apps/artboard/src/components/error-boundary.tsx`
   - åŠŸèƒ½ï¼šæ•è· React æ¸²æŸ“é”™è¯¯å¹¶æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
   - åŒ…å«ï¼šé”™è¯¯å †æ ˆã€ç»„ä»¶å †æ ˆã€é‡è¯•å’Œåˆ·æ–°æŒ‰é’®

2. **é›†æˆ Error Boundary** âœ… 
   - æ–‡ä»¶ï¼š`apps/artboard/src/providers/index.tsx`
   - åœ¨ artboard åº”ç”¨çš„æ ¹çº§åˆ«æ·»åŠ é”™è¯¯è¾¹ç•Œ

3. **æ·»åŠ è¯¦ç»†è°ƒè¯•æ—¥å¿—** âœ…
   - åœ¨ `apps/artboard/src/providers/index.tsx` ä¸­æ·»åŠ ï¼š
     - æ¥æ”¶ç®€å†æ•°æ®æ—¶çš„æ—¥å¿—
     - ä» localStorage åŠ è½½æ•°æ®æ—¶çš„æ—¥å¿—
     - æ•°æ®åˆå¹¶åçš„éªŒè¯æ—¥å¿—
     - Layout æ•°æ®çš„ç‰¹å®šæ—¥å¿—

4. **ä¿®å¤å‰©ä½™çš„ç›´æ¥å±æ€§è®¿é—®** âœ…
   - `apps/artboard/src/providers/index.tsx`ï¼šä¿®å¤ metadata.layout ç›´æ¥è®¿é—®
   - `apps/client/src/stores/resume.ts`ï¼šå¢å¼º layout è®¿é—®çš„é˜²æŠ¤æªæ–½

#### æŠ€æœ¯æ”¹è¿›
- **æ·±åº¦æ•°æ®åˆå¹¶**ï¼šç¡®ä¿ä»æ¶ˆæ¯ä¼ é€’æˆ– localStorage åŠ è½½çš„æ•°æ®ä¸é»˜è®¤æ•°æ®å®Œå…¨åˆå¹¶
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šæ‰€æœ‰ metadata å­å±æ€§è®¿é—®éƒ½ä½¿ç”¨å¯é€‰é“¾å’Œé»˜è®¤å€¼
- **é”™è¯¯è¾¹ç•Œ**ï¼šæä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ˜¾ç¤ºï¼ŒåŒ…å«æŠ€æœ¯è¯¦æƒ…ç”¨äºè°ƒè¯•
- **è¯¦ç»†æ—¥å¿—**ï¼šå¸®åŠ©è¿½è¸ªæ•°æ®æµå’Œè¯†åˆ«é—®é¢˜æ ¹æº

#### é¢„æœŸæ•ˆæœ
- ç”¨æˆ·ç°åœ¨å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª
- æ§åˆ¶å°å°†æ˜¾ç¤ºæ•°æ®åŠ è½½å’Œåˆå¹¶çš„è¯¦ç»†è¿‡ç¨‹
- æ‰€æœ‰ layout è®¿é—®é”™è¯¯åº”è¯¥è¢«ä¿®å¤
- å¦‚æœä»æœ‰é”™è¯¯ï¼Œå°†æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥å¿«é€Ÿå®šä½å’Œä¿®å¤

### 2025-01-20: ä¿®å¤ TypeScript Linter é”™è¯¯
#### å‘ç°çš„é—®é¢˜
ç®€å†å­˜å‚¨ (`apps/client/src/stores/resume.ts`) ä¸­å­˜åœ¨å¤šä¸ª ESLint é”™è¯¯ï¼š
1. ä¸å¿…è¦çš„æ¡ä»¶æ£€æŸ¥ - `metadata.layout` æ€»æ˜¯å­˜åœ¨
2. ä¸å¿…è¦çš„å¯é€‰é“¾ - `sections.custom` æ€»æ˜¯å­˜åœ¨  
3. åŠ¨æ€åˆ é™¤å±æ€§é”®è¿å ESLint è§„åˆ™

#### å®Œæˆçš„ä¿®å¤ âœ…
1. **ç§»é™¤ä¸å¿…è¦çš„æ¡ä»¶æ£€æŸ¥** âœ…
   - ç¬¬66è¡Œå’Œç¬¬83è¡Œï¼šç§»é™¤ `!state.resume.data.metadata.layout` æ£€æŸ¥
   - ç¬¬69è¡Œå’Œç¬¬86è¡Œï¼šç§»é™¤ `state.resume.data.metadata.layout || defaultResumeData.metadata.layout` å†—ä½™æ¡ä»¶
   - åŸå› ï¼šæ ¹æ®ç±»å‹å®šä¹‰ï¼Œ`metadata.layout` åœ¨é»˜è®¤æ•°æ®ä¸­å§‹ç»ˆå­˜åœ¨

2. **ç§»é™¤ä¸å¿…è¦çš„å¯é€‰é“¾** âœ…
   - ç¬¬89è¡Œï¼šç§»é™¤ `state.resume.data.sections?.custom` ä¸­çš„å¯é€‰é“¾
   - åŸå› ï¼šæ ¹æ®ç±»å‹å®šä¹‰ï¼Œ`sections.custom` åœ¨é»˜è®¤æ•°æ®ä¸­å§‹ç»ˆå­˜åœ¨ï¼ˆé»˜è®¤ä¸ºç©ºå¯¹è±¡ `{}`ï¼‰

3. **ä½¿ç”¨å±•å¼€è¯­æ³•æ›¿ä»£åŠ¨æ€åˆ é™¤** âœ…
   - ç¬¬90è¡Œï¼šå°† `delete state.resume.data.sections.custom[id]` 
   - æ›¿æ¢ä¸ºï¼š`const { [id]: removed, ...remainingCustomSections } = state.resume.data.sections.custom`
   - ç¬¦åˆ `@typescript-eslint/no-dynamic-delete` è§„åˆ™

#### æŠ€æœ¯æ”¹è¿›
- **ä»£ç ç®€åŒ–**ï¼šç§»é™¤å†—ä½™çš„é˜²æŠ¤æ£€æŸ¥
- **ç±»å‹å®‰å…¨**ï¼šåˆ©ç”¨ TypeScript ç±»å‹ç³»ç»Ÿä¿è¯æ•°æ®å®Œæ•´æ€§
- **ESLint åˆè§„**ï¼šä¿®å¤æ‰€æœ‰é™æ€åˆ†æé”™è¯¯
- **ä»£ç æ¸…æ™°åº¦**ï¼šä½¿ç”¨ç°ä»£ JavaScript è¯­æ³•ï¼ˆå±•å¼€è¿ç®—ç¬¦ï¼‰

### 2025-01-10: ä¿®å¤å‰©ä½™çš„å±æ€§è®¿é—®é”™è¯¯
#### å‘ç°çš„é—®é¢˜
ç”¨æˆ·ä»ç„¶é‡åˆ°ï¼š
1. `Cannot read properties of undefined (reading 'custom')` - åœ¨ `apps/client/src/pages/builder/sidebars/left/index.tsx:36`
2. `Cannot read properties of undefined (reading 'layout')` - å¤šä¸ªä½ç½®
3. artboard æœåŠ¡å™¨è¿æ¥é—®é¢˜ï¼š`[vite] http proxy error: /artboard/builder`

#### å®Œæˆçš„ä¿®å¤ âœ…
1. **å®¢æˆ·ç«¯ custom å±æ€§è®¿é—®** âœ…
   - `apps/client/src/pages/builder/sidebars/left/index.tsx` - ä¿®å¤ `state.resume.data.sections.custom` è®¿é—®
   - `apps/client/src/pages/builder/sidebars/left/sections/custom/section.tsx` - ä¿®å¤ `state.resume.data.basics.customFields` è®¿é—®
   - `apps/client/src/stores/resume.ts` - åœ¨åˆ é™¤å‰æ·»åŠ å­˜åœ¨æ€§æ£€æŸ¥

2. **Artboard æ¨¡æ¿ custom å±æ€§è®¿é—®** âœ…
   - ä¿®å¤äº†æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶ä¸­çš„ `state.resume.sections.custom[id]` è®¿é—®ï¼š
     - `nosepass.tsx`, `leafish.tsx`, `rhyhorn.tsx`, `pikachu.tsx`
     - `onyx.tsx`, `kakuna.tsx`, `glalie.tsx`, `gengar.tsx`
     - `ditto.tsx`, `chikorita.tsx`, `bronzor.tsx`, `azurill.tsx`
   - ç»Ÿä¸€ä½¿ç”¨ `state.resume.sections?.custom?.[id]` æ¨¡å¼

3. **æ•°æ®ç»“æ„éªŒè¯** âœ…
   - ç¡®è®¤ `defaultResumeData` ç»“æ„æ­£ç¡®åŒ…å« `sections.custom: {}`
   - ç¡®è®¤ artboard store æ­£ç¡®ä½¿ç”¨ defaultResumeData åˆå§‹åŒ–

#### æŠ€æœ¯æ”¹è¿›
- **å…¨é¢çš„é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šæ‰€æœ‰ custom å’Œ sections å±æ€§è®¿é—®éƒ½ä½¿ç”¨å¯é€‰é“¾
- **ä¸€è‡´çš„é”™è¯¯å¤„ç†**ï¼šåœ¨å®¢æˆ·ç«¯å’Œ artboard åº”ç”¨ä¸­ä½¿ç”¨ç›¸åŒçš„é˜²æŠ¤æ¨¡å¼
- **æ•°æ®å®Œæ•´æ€§ä¿è¯**ï¼šé»˜è®¤æ•°æ®ç»“æ„ç¡®ä¿æ‰€æœ‰å¿…éœ€å±æ€§å­˜åœ¨

#### é¢„æœŸç»“æœ
- æ‰€æœ‰ "Cannot read properties of undefined (reading 'custom')" é”™è¯¯åº”è¯¥è¢«ä¿®å¤
- æ‰€æœ‰ "Cannot read properties of undefined (reading 'layout')" é”™è¯¯åº”è¯¥è¢«ä¿®å¤
- artboard å’Œå®¢æˆ·ç«¯åº”ç”¨éƒ½åº”è¯¥èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“
- ç®€å†åˆ›å»ºã€ç¼–è¾‘å’Œé¢„è§ˆåŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ

### 2025-01-10: ä¿®å¤ API å’Œæ„å»ºå…¼å®¹æ€§é—®é¢˜
#### å‘ç°çš„é¢å¤–é—®é¢˜
1. **Node.js æ¨¡å—å…¼å®¹æ€§è­¦å‘Š**ï¼š
   - `path`ã€`fs`ã€`source-map-js`ã€`url` ç­‰ Node.js æ¨¡å—åœ¨æµè§ˆå™¨ä¸­è¢«é”™è¯¯å¼•ç”¨
   - è¿™äº›æ¨¡å—åº”è¯¥åªåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨

2. **API æœåŠ¡å™¨é”™è¯¯**ï¼š
   - `GET /api/resume` è¿”å› 500 é”™è¯¯
   - `PATCH /api/resume/temp` è¿”å› 400 éªŒè¯å¤±è´¥é”™è¯¯

3. **æ•°æ®åºåˆ—åŒ–é—®é¢˜**ï¼š
   - ç®€å†æ•°æ®åœ¨æ•°æ®åº“å­˜å‚¨å’Œè¯»å–æ—¶çš„ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–ä¸ä¸€è‡´

#### å®Œæˆçš„ä¿®å¤ âœ…
1. **Vite é…ç½®ä¼˜åŒ–** âœ…
   - `apps/client/vite.config.ts`ï¼šæ·»åŠ  Node.js æ¨¡å—å¤–éƒ¨åŒ–é…ç½®
   - `apps/artboard/vite.config.ts`ï¼šåŒæ ·çš„å¤–éƒ¨åŒ–é…ç½®
   - æ·»åŠ  `global: 'globalThis'` å®šä¹‰ä»¥æé«˜æµè§ˆå™¨å…¼å®¹æ€§

2. **æœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†ä¿®å¤** âœ…
   - `apps/server/src/resume/resume.service.ts`ï¼š
     - ä¿®å¤ `findAll()` æ–¹æ³•çš„æ•°æ®è§£æ
     - ä¿®å¤ `findOne()` æ–¹æ³•çš„æ•°æ®è§£æ
     - ä¿®å¤ `update()` æ–¹æ³•çš„æ•°æ®åºåˆ—åŒ–å’Œè§£æ
   - ç¡®ä¿æ‰€æœ‰ API è¿”å›çš„æ•°æ®æ ¼å¼ä¸€è‡´

3. **è°ƒè¯•æ—¥å¿—æ”¹è¿›** âœ…
   - `apps/artboard/src/providers/index.tsx`ï¼šä¼˜åŒ–æ•°æ®æ˜¾ç¤ºæ ¼å¼

#### æŠ€æœ¯æ”¹è¿›
- **ä¸€è‡´çš„æ•°æ®å¤„ç†**ï¼šç¡®ä¿æ•°æ®åº“ä¸­çš„ JSON æ•°æ®åœ¨è¯»å–æ—¶æ­£ç¡®è§£æ
- **æ„å»ºå…¼å®¹æ€§**ï¼šé˜²æ­¢ Node.js æ¨¡å—åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¢«é”™è¯¯æ‰“åŒ…
- **é”™è¯¯å¤„ç†å¢å¼º**ï¼šæ”¹è¿›æœåŠ¡å™¨ç«¯é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

#### é¢„æœŸç»“æœ
- æµè§ˆå™¨æ§åˆ¶å°ä¸å†æ˜¾ç¤º Node.js æ¨¡å—è­¦å‘Š
- API è°ƒç”¨åº”è¯¥è¿”å›æ­£ç¡®çš„çŠ¶æ€ç å’Œæ•°æ®
- ç®€å†æ•°æ®çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°æ“ä½œåº”è¯¥æ­£å¸¸å·¥ä½œ
- Artboard ç»„ä»¶åº”è¯¥æ¥æ”¶åˆ°æ­£ç¡®æ ¼å¼çš„æ•°æ®å¯¹è±¡ 

### 2025-01-20: ä¿®å¤ PDF å¯¼å‡ºåŠŸèƒ½ 404 é”™è¯¯
#### å‘ç°çš„é—®é¢˜
ç”¨æˆ·æŠ¥å‘Š PDF å¯¼å‡ºåŠŸèƒ½ä¸å·¥ä½œï¼Œæç¤º "404 Not Found" é”™è¯¯ã€‚

#### é—®é¢˜åˆ†æ
ç»è¿‡ä»£ç åˆ†æå‘ç°é—®é¢˜åœ¨äºæœåŠ¡ç«¯è·¯ç”±è£…é¥°å™¨ä¸­çš„è·¯å¾„é—®é¢˜ï¼š
- å®¢æˆ·ç«¯è¯·æ±‚ï¼š`GET /api/resume/print/{id}`
- æœåŠ¡ç«¯æ§åˆ¶å™¨ï¼š`@Get("/print/:id")` - å‰å¯¼æ–œæ å¯¼è‡´è·¯å¾„ä¸åŒ¹é…

#### å®Œæˆçš„ä¿®å¤ âœ…
1. **è·¯ç”±è·¯å¾„ä¿®å¤** âœ…
   - æ–‡ä»¶ï¼š`apps/server/src/resume/resume.controller.ts`
   - ä¿®æ”¹ï¼š`@Get("/print/:id")` â†’ `@Get("print/:id")`
   - ä¿®æ”¹ï¼š`@Get("/print/:id/preview")` â†’ `@Get("print/:id/preview")`
   - åŸå› ï¼šNestJS è·¯ç”±è£…é¥°å™¨ä¸­çš„å‰å¯¼æ–œæ ä¼šåˆ›å»ºç»å¯¹è·¯å¾„ï¼Œå¯¼è‡´ä¸æ§åˆ¶å™¨å‰ç¼€å†²çª

#### æŠ€æœ¯ç»†èŠ‚
- **è·¯ç”±ç»“æ„**ï¼š
  - æ§åˆ¶å™¨è£…é¥°å™¨ï¼š`@Controller("resume")`
  - å…¨å±€å‰ç¼€ï¼š`app.setGlobalPrefix("api")`
  - ä¿®å¤å‰ï¼š`/api/resume` + `/print/:id` = è·¯å¾„å†²çª
  - ä¿®å¤åï¼š`/api/resume` + `print/:id` = `/api/resume/print/:id` âœ…

#### é¢„æœŸç»“æœ
- PDF å¯¼å‡ºåŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ
- ç‚¹å‡»"ä¸‹è½½ PDF"æŒ‰é’®ä¸å†è¿”å› 404 é”™è¯¯
- ç”¨æˆ·å¯ä»¥æˆåŠŸå¯¼å‡ºå’Œä¸‹è½½ç®€å† PDF æ–‡ä»¶ 